!function (e) { "use strict"; "function" == typeof define && define.amd ? define(["jquery"], e) : "object" == typeof module && module.exports ? module.exports = e(require("jquery")) : e(window.jQuery) }(function (e) { "use strict"; e.fn.ratingLocales = {}; var t, a, n, r, i, l, s; t = function (t, a) { return null === t || void 0 === t || 0 === t.length || a && "" === e.trim(t) }, a = function (e, t) { return e ? " " + t : "" }, n = function (e, t) { e.removeClass(t).addClass(t) }, r = function (e) { var t = ("" + e).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/); return t ? Math.max(0, (t[1] ? t[1].length : 0) - (t[2] ? +t[2] : 0)) : 0 }, i = function (e, t) { return parseFloat(e.toFixed(t)) }, l = function (e, t, a, n) { var r = n ? t : t.split(" ").join(".rating ") + ".rating"; e.off(r).on(r, a) }, (s = function (t, a) { var n = this; n.$element = e(t), n._init(a) }).prototype = { constructor: s, _parseAttr: function (e, a) { var n, r, i, l, s = this.$element, o = s.attr("type"); if ("range" === o || "number" === o) { switch (r = a[e] || s.data(e) || s.attr(e), e) { case "min": i = 0; break; case "max": i = 5; break; default: i = .5 } n = t(r) ? i : r, l = parseFloat(n) } else l = parseFloat(a[e]); return isNaN(l) ? i : l }, _setDefault: function (e, a) { var n = this; t(n[e]) && (n[e] = a) }, _listenClick: function (e, t) { if (e.stopPropagation(), e.preventDefault(), !0 === e.handled) return !1; t(e), e.handled = !0 }, _starClick: function (e) { var t, a = this; a._listenClick(e, function (e) { if (a.inactive) return !1; t = a._getTouchPosition(e), a._setStars(t), a.$element.trigger("change").trigger("rating.change", [a.$element.val(), a._getCaption()]), a.starClicked = !0 }) }, _starMouseMove: function (e) { var t, a, n = this; !n.hoverEnabled || n.inactive || e && e.isDefaultPrevented() || (n.starClicked = !1, t = n._getTouchPosition(e), a = n.calculate(t), n._toggleHover(a), n.$element.trigger("rating.hover", [a.val, a.caption, "stars"])) }, _starMouseLeave: function (e) { var t, a = this; !a.hoverEnabled || a.inactive || a.starClicked || e && e.isDefaultPrevented() || (t = a.cache, a._toggleHover(t), a.$element.trigger("rating.hoverleave", ["stars"])) }, _clearClick: function (e) { var t = this; t._listenClick(e, function () { t.inactive || (t.clear(), t.clearClicked = !0) }) }, _clearMouseMove: function (e) { var t, a, n, r = this; !r.hoverEnabled || r.inactive || !r.hoverOnClear || e && e.isDefaultPrevented() || (r.clearClicked = !1, t = '<span class="' + r.clearCaptionClass + '">' + r.clearCaption + "</span>", a = r.clearValue, n = { caption: t, width: r.getWidthFromValue(a) || 0, val: a }, r._toggleHover(n), r.$element.trigger("rating.hover", [a, t, "clear"])) }, _clearMouseLeave: function (e) { var t, a = this; !a.hoverEnabled || a.inactive || a.clearClicked || !a.hoverOnClear || e && e.isDefaultPrevented() || (t = a.cache, a._toggleHover(t), a.$element.trigger("rating.hoverleave", ["clear"])) }, _resetForm: function (e) { var t = this; e && e.isDefaultPrevented() || t.inactive || t.reset() }, _setTouch: function (e, a) { var n, r, i, l, s, o, c, u = this; ("ontouchstart" in window || window.DocumentTouch && document instanceof window.DocumentTouch) && !u.inactive && (n = e.originalEvent, r = t(n.touches) ? n.changedTouches : n.touches, i = u._getTouchPosition(r[0]), a ? (u._setStars(i), u.$element.trigger("change").trigger("rating.change", [u.$element.val(), u._getCaption()]), u.starClicked = !0) : (s = (l = u.calculate(i)).val <= u.clearValue ? u.fetchCaption(u.clearValue) : l.caption, o = u.getWidthFromValue(u.clearValue), c = l.val <= u.clearValue ? o + "%" : l.width, u._setCaption(s), u.$filledStars.css("width", c))) }, _initTouch: function (e) { var t = this, a = "touchend" === e.type; t._setTouch(e, a) }, _initSlider: function (e) { var a = this; t(a.$element.val()) && a.$element.val(0), a.initialValue = a.$element.val(), a._setDefault("min", a._parseAttr("min", e)), a._setDefault("max", a._parseAttr("max", e)), a._setDefault("step", a._parseAttr("step", e)), (isNaN(a.min) || t(a.min)) && (a.min = 0), (isNaN(a.max) || t(a.max)) && (a.max = 5), (isNaN(a.step) || t(a.step) || 0 === a.step) && (a.step = .5), a.diff = a.max - a.min }, _initHighlight: function (e) { var t, a = this, n = a._getCaption(); e || (e = a.$element.val()), t = a.getWidthFromValue(e) + "%", a.$filledStars.width(t), a.cache = { caption: n, width: t, val: e } }, _getContainerCss: function () { var e = this; return "rating-container" + a(e.theme, "theme-" + e.theme) + a(e.rtl, "rating-rtl") + a(e.size, "rating-" + e.size) + a(e.animate, "rating-animate") + a(e.disabled || e.readonly, "rating-disabled") + a(e.containerClass, e.containerClass) }, _checkDisabled: function () { var e = this, t = e.$element, a = e.options; e.disabled = void 0 === a.disabled ? t.attr("disabled") || !1 : a.disabled, e.readonly = void 0 === a.readonly ? t.attr("readonly") || !1 : a.readonly, e.inactive = e.disabled || e.readonly, t.attr({ disabled: e.disabled, readonly: e.readonly }) }, _addContent: function (e, t) { var a = this, n = a.$container, r = "clear" === e; return a.rtl ? r ? n.append(t) : n.prepend(t) : r ? n.prepend(t) : n.append(t) }, _generateRating: function () { var t, a, r, i = this, l = i.$element; a = i.$container = e(document.createElement("div")).insertBefore(l), n(a, i._getContainerCss()), i.$rating = t = e(document.createElement("div")).attr("class", "rating").appendTo(a).append(i._getStars("empty")).append(i._getStars("filled")), i.$emptyStars = t.find(".empty-stars"), i.$filledStars = t.find(".filled-stars"), i._renderCaption(), i._renderClear(), i._initHighlight(), a.append(l), i.rtl && (r = Math.max(i.$emptyStars.outerWidth(), i.$filledStars.outerWidth()), i.$emptyStars.width(r)) }, _getCaption: function () { var e = this; return e.$caption && e.$caption.length ? e.$caption.html() : e.defaultCaption }, _setCaption: function (e) { var t = this; t.$caption && t.$caption.length && t.$caption.html(e) }, _renderCaption: function () { var t, a = this, r = a.$element.val(), i = a.captionElement ? e(a.captionElement) : ""; if (a.showCaption) { if (t = a.fetchCaption(r), i && i.length) return n(i, "caption"), i.html(t), void (a.$caption = i); a._addContent("caption", '<div class="caption">' + t + "</div>"), a.$caption = a.$container.find(".caption") } }, _renderClear: function () { var t, a = this, r = a.clearElement ? e(a.clearElement) : ""; if (a.showClear) { if (t = a._getClearClass(), r.length) return n(r, t), r.attr({ title: a.clearButtonTitle }).html(a.clearButton), void (a.$clear = r); a._addContent("clear", '<div class="' + t + '" title="' + a.clearButtonTitle + '">' + a.clearButton + "</div>"), a.$clear = a.$container.find("." + a.clearButtonBaseClass) } }, _getClearClass: function () { return this.clearButtonBaseClass + " " + (this.inactive ? "" : this.clearButtonActiveClass) }, _getTouchPosition: function (e) { return (t(e.pageX) ? e.originalEvent.touches[0].pageX : e.pageX) - this.$rating.offset().left }, _toggleHover: function (e) { var t, a, n, r = this; e && (r.hoverChangeStars && (t = r.getWidthFromValue(r.clearValue), a = e.val <= r.clearValue ? t + "%" : e.width, r.$filledStars.css("width", a)), r.hoverChangeCaption && (n = e.val <= r.clearValue ? r.fetchCaption(r.clearValue) : e.caption) && r._setCaption(n + "")) }, _init: function (t) { var a = this, n = a.$element.addClass("hide"); return a.options = t, e.each(t, function (e, t) { a[e] = t }), (a.rtl || "rtl" === n.attr("dir")) && (a.rtl = !0, n.attr("dir", "rtl")), a.starClicked = !1, a.clearClicked = !1, a._initSlider(t), a._checkDisabled(), a.displayOnly && (a.inactive = !0, a.showClear = !1, a.showCaption = !1), a._generateRating(), a._listen(), n.removeClass("rating-loading") }, _listen: function () { var t = this, a = t.$element, n = a.closest("form"), r = t.$rating, i = t.$clear; return l(r, "touchstart touchmove touchend", e.proxy(t._initTouch, t)), l(r, "click touchstart", e.proxy(t._starClick, t)), l(r, "mousemove", e.proxy(t._starMouseMove, t)), l(r, "mouseleave", e.proxy(t._starMouseLeave, t)), t.showClear && i.length && (l(i, "click touchstart", e.proxy(t._clearClick, t)), l(i, "mousemove", e.proxy(t._clearMouseMove, t)), l(i, "mouseleave", e.proxy(t._clearMouseLeave, t))), n.length && l(n, "reset", e.proxy(t._resetForm, t)), a }, _getStars: function (e) { var t, a = this, n = '<span class="' + e + '-stars">'; for (t = 1; t <= a.stars; t++) n += '<span class="star">' + a[e + "Star"] + "</span>"; return n + "</span>" }, _setStars: function (e) { var t = this, a = arguments.length ? t.calculate(e) : t.calculate(), n = t.$element; return n.val(a.val), t.$filledStars.css("width", a.width), t._setCaption(a.caption), t.cache = a, n }, showStars: function (e) { var t = this, a = parseFloat(e); return t.$element.val(isNaN(a) ? t.clearValue : a), t._setStars() }, calculate: function (e) { var a = this, n = t(a.$element.val()) ? 0 : a.$element.val(), r = arguments.length ? a.getValueFromPosition(e) : n, i = a.fetchCaption(r), l = a.getWidthFromValue(r); return l += "%", { caption: i, width: l, val: r } }, getValueFromPosition: function (e) { var t, a, n = this, l = r(n.step), s = n.$rating.width(); return a = n.diff * e / (s * n.step), a = n.rtl ? Math.floor(a) : Math.ceil(a), t = i(parseFloat(n.min + a * n.step), l), t = Math.max(Math.min(t, n.max), n.min), n.rtl ? n.max - t : t }, getWidthFromValue: function (e) { var t, a, n = this, r = n.min, i = n.max, l = n.$emptyStars; return !e || e <= r || r === i ? 0 : (a = l.outerWidth(), t = a ? l.width() / a : 1, e >= i ? 100 : (e - r) * t * 100 / (i - r)) }, fetchCaption: function (e) { var a, n, l, s, o, c = this, u = parseFloat(e) || c.clearValue, h = c.starCaptions, d = c.starCaptionClasses; return u && u !== c.clearValue && (u = i(u, r(c.step))), s = "function" == typeof d ? d(u) : d[u], l = "function" == typeof h ? h(u) : h[u], n = t(l) ? c.defaultCaption.replace(/\{rating}/g, u) : l, a = t(s) ? c.clearCaptionClass : s, o = u === c.clearValue ? c.clearCaption : n, '<span class="' + a + '">' + o + "</span>" }, destroy: function () { var a = this, n = a.$element; return t(a.$container) || a.$container.before(n).remove(), e.removeData(n.get(0)), n.off("rating").removeClass("hide") }, create: function (e) { var t = this, a = e || t.options || {}; return t.destroy().rating(a) }, clear: function () { var e = this, t = '<span class="' + e.clearCaptionClass + '">' + e.clearCaption + "</span>"; return e.inactive || e._setCaption(t), e.showStars(e.clearValue).trigger("change").trigger("rating.clear") }, reset: function () { var e = this; return e.showStars(e.initialValue).trigger("rating.reset") }, update: function (e) { var t = this; return arguments.length ? t.showStars(e) : t.$element }, refresh: function (t) { var a = this, n = a.$element; return t ? a.destroy().rating(e.extend(!0, a.options, t)).trigger("rating.refresh") : n } }, e.fn.rating = function (a) { var n = Array.apply(null, arguments), r = []; switch (n.shift(), this.each(function () { var i, l = e(this), o = l.data("rating"), c = "object" == typeof a && a, u = c.language || l.data("language") || "en", h = {}; o || ("en" === u || t(e.fn.ratingLocales[u]) || (h = e.fn.ratingLocales[u]), i = e.extend(!0, {}, e.fn.rating.defaults, e.fn.ratingLocales.en, h, c, l.data()), o = new s(this, i), l.data("rating", o)), "string" == typeof a && r.push(o[a].apply(o, n)) }), r.length) { case 0: return this; case 1: return void 0 === r[0] ? this : r[0]; default: return r } }, e.fn.rating.defaults = { theme: "", language: "en", stars: 5, filledStar: '<i class="glyphicon glyphicon-star"></i>', emptyStar: '<i class="glyphicon glyphicon-star-empty"></i>', containerClass: "", size: "md", animate: !0, displayOnly: !1, rtl: !1, showClear: !0, showCaption: !0, starCaptionClasses: { .5: "label label-danger", 1: "label label-danger", 1.5: "label label-warning", 2: "label label-warning", 2.5: "label label-info", 3: "label label-info", 3.5: "label label-primary", 4: "label label-primary", 4.5: "label label-success", 5: "label label-success" }, clearButton: '<i class="glyphicon glyphicon-minus-sign"></i>', clearButtonBaseClass: "clear-rating", clearButtonActiveClass: "clear-rating-active", clearCaptionClass: "label label-default", clearValue: null, captionElement: null, clearElement: null, hoverEnabled: !0, hoverChangeCaption: !0, hoverChangeStars: !0, hoverOnClear: !0 }, e.fn.ratingLocales.en = { defaultCaption: "{rating} Stars", starCaptions: { .5: "Half Star", 1: "One Star", 1.5: "One & Half Star", 2: "Two Stars", 2.5: "Two & Half Stars", 3: "Three Stars", 3.5: "Three & Half Stars", 4: "Four Stars", 4.5: "Four & Half Stars", 5: "Five Stars" }, clearButtonTitle: "Clear", clearCaption: "Not Rated" }, e.fn.rating.Constructor = s, e(document).ready(function () { var t = e("input.rating"); t.length && t.removeClass("rating-loading").addClass("rating-loading").rating(); var a = e("input.rating-usd"); a.length && a.removeClass("rating-loading").addClass("rating-loading").rating({ filledStar: '<i class="glyphicon glyphicon-usd"></i>', emptyStar: '<i class="glyphicon glyphicon-usd"></i>' }) }) });